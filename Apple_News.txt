Apple shares soared to an all-time high in after hours trading, crossing the $400 level for the first time, after the company posted second-quarter results that crushed Street estimates, and announced a four-for-one stock split.

Apple (AAPL) reported revenue for its fiscal third quarter ended June 30 of $59.7 billion, up 11% from a year ago, and well ahead of the Wall Street analyst consensus at $52.1 billion. Profits were $2.58 a share, soaring past the Street consensus at $2.09.

Product revenues were up 9.9%, while services were up 14.8%. The company showed sales increases in all major product areas, with iPhone up 1.6%, Macs up 21.6%, iPad up 31%, and wearables up 16.7%.

“Apple’s record June quarter was driven by double-digit growth in both Products and Services and growth in each of our geographic segments,” Apple CEO Tim Cook said in a statement. “In uncertain times, this performance is a testament to the important role our products play in our customers’ lives and to Apple’s relentless innovation.”

Chief Financial Officer Luca Maestri added that the quarter was “strong evidence of Apple’s ability to innovate and execute during challenging times.” He said the company’s active installed base of devices reached an all-time high in all of geographic segments and all major product categories.

In a conference call with analysts and investors on Thursday afternoon, Cook said Apple saw better-than-expected demand for iPhones in both May and June. He added that Apple saw supply constraints in both iPads and Macs in the quarter amid strong demand. Wearables growth decelerated as expected. Cook said Apple doubled 2016 services revenue six months ahead of its original target of year-end 2020. Cook also said the recent virtual Worldwide Developers Conference attracted more than 22 million viewers.

The company said it now has over 550 million paid subscriptions across its services businesses, and expects to reach 600 million before the end of the calendar year.

The company did not give financial guidance in the press release announcing earnings. CFO Maestri confirmed on the call that the company isn’t providing revenue or margin guidance for the September quarter, but he gave some hints. In particular, he notes that last year the company made new iPhones available in late September, but that this year new phones will be “a few weeks later,” a veiled but noteworthy reference to the expected fall launch of the first 5G iPhones, which would now appear to be arriving in October.

Apple said its board declared a four-for-one stock split, effective Aug. 31. This is fifth stock split in the company’s history, the most recent being a 7-for-1 split in 2014. Previous splits occurred in 2005, 2000 and 1987. While stock splits should logically have no impact on stock prices, investors tend to like them, and they often fuel short-term share gains when announced.

In after hours trading, Apple shares are up 4.6%, to $402.73. The stock has never closed a regular trading session above $400. With the rally, the stock is approaching a market cap of $1.75 trillion.